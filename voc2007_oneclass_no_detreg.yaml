description: DeformableDETR_VOC2007_OneClass_No_DETReg

target:
  service: amlk8s
  name: itpeastusv100cl
  vc: resrchvc

environment:
  image: joshins/pytorch:1.7.0-cuda11.0-cudnn8-devel-wsdetr
  setup:
   - pip install -r requirements.txt
   - sh make.sh
  
code:
  local_dir: $CONFIG_DIR/

data:
  remote_dir: data/

search:
  job_template:
    name: DeformableDETR_VOC2007_OneClass_No_DETReg_{auto:3s}
    sku: G1
    command:
      - python src/main.py --train_imgs_dir $$PT_DATA_DIR/voc/voc2007/trainval --train_anns $$PT_DATA_DIR/voc/voc2007/annotations/trainval_oneclass.json --val_imgs_dir $$PT_DATA_DIR/voc/voc2007/test --val_anns $$PT_DATA_DIR/voc/voc2007/test_oneclass.json --lr {lr} --batch_size 4 --num_classes 2

  type: grid
  max_trials: 4
  params:
    - name: lr
      spec: discrete
      values: [5e-5, 1e-4, 2e-4, 5e-4]
