description: DeformableDETR_OpenImages_1GPU

target:
  service: amlk8s
  name: itpeastusv100cl
  vc: resrchvc

environment:
  image: joshins/pytorch:1.7.0-cuda11.0-cudnn8-devel-wsdetr
  setup:
   - pip install -r requirements.txt
   - sh make.sh
  
code:
  local_dir: $CONFIG_DIR/

data:
  remote_dir: data/

search:
  job_template:
    name: DeformableDETR_OpenImages_1GPU_{auto:3s}
    sku: G1
    command:
      - python main.py --train_imgs_dir $$PT_DATA_DIR/openimages/train --train_anns $$PT_DATA_DIR/openimages/annotations/openimages_v6_train_bbox.json --val_imgs_dir $$PT_DATA_DIR/openimages/val --val_anns $$PT_DATA_DIR/openimages/annotations/openimages_v6_val_bbox.json --lr {lr} --batch_size 4 --num_classes 602

  type: grid
  max_trials: 4
  params:
    - name: lr
      spec: discrete
      values: [5e-5, 1e-4, 2e-4, 5e-4]
